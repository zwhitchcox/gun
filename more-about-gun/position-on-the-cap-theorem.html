
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Position on the CAP Theorem Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="sharding.html" />
    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../crash-course.html">
            
                <a href="../crash-course.html">
            
                    
                    Crash Course
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../getting-started.html">
            
                <a href="../getting-started.html">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    Core API
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../core-api/constructor.html">
            
                <a href="../core-api/constructor.html">
            
                    
                    Gun.constructor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../core-api/put.html">
            
                <a href="../core-api/put.html">
            
                    
                    gun.put
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../core-api/get.html">
            
                <a href="../core-api/get.html">
            
                    
                    gun.get
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../core-api/back.html">
            
                <a href="../core-api/back.html">
            
                    
                    gun.back
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../core-api/opt.html">
            
                <a href="../core-api/opt.html">
            
                    
                    gun.opt
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    API
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../api/path.html">
            
                <a href="../api/path.html">
            
                    
                    gun.path
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../api/on.html">
            
                <a href="../api/on.html">
            
                    
                    gun.on
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../api/val.html">
            
                <a href="../api/val.html">
            
                    
                    gun.val
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../api/set.html">
            
                <a href="../api/set.html">
            
                    
                    gun.set
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../api/map.html">
            
                <a href="../api/map.html">
            
                    
                    gun.map
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../api/not.html">
            
                <a href="../api/not.html">
            
                    
                    gun.not
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="../api/init.html">
            
                <a href="../api/init.html">
            
                    
                    gun.init
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="../api/key.html">
            
                <a href="../api/key.html">
            
                    
                    gun.key
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    Resources
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../resources/guns-data-format.html">
            
                <a href="../resources/guns-data-format.html">
            
                    
                    Gun's Data Format
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../resources/glossary.html">
            
                <a href="../resources/glossary.html">
            
                    
                    Glossary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../resources/using-amazon-s3-for-storage.html">
            
                <a href="../resources/using-amazon-s3-for-storage.html">
            
                    
                    Using Amazon S3 for Storage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../resources/security-authentication-authorization.html">
            
                <a href="../resources/security-authentication-authorization.html">
            
                    
                    Security, Authentication, and Authorization
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    More About Gun
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="how-writes-are-handled.html">
            
                <a href="how-writes-are-handled.html">
            
                    
                    How Writes Are Handled
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="the-mesh-network-protocol.html">
            
                <a href="the-mesh-network-protocol.html">
            
                    
                    The Mesh Network Protocol
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="conflict-resolution.html">
            
                <a href="conflict-resolution.html">
            
                    
                    Conflict Resolution
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" >
            
                <a target="_blank" href="http://gun.js.org/distributed/matters.html">
            
                    
                    How the Algorithm Works
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.7.5" data-path="position-on-the-cap-theorem.html">
            
                <a href="position-on-the-cap-theorem.html">
            
                    
                    Position on the CAP Theorem
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="sharding.html">
            
                <a href="sharding.html">
            
                    
                    Sharding
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../projects.html">
            
                <a href="../projects.html">
            
                    
                    Projects
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../modules.html">
            
                <a href="../modules.html">
            
                    
                    Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../snippets-v06x.html">
            
                <a href="../snippets-v06x.html">
            
                    
                    Snippets (v0.6.x)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" >
            
                <span>
            
                    
                    Snippets (v0.3.x)(snippets-v03x.md)
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" >
            
                <a target="_blank" href="https://github.com/amark/gun/wiki/0.2.x-Table-of-Contents">
            
                    
                    v0.2.x
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Position on the CAP Theorem</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="position-on-the-cap-theorem">Position on the CAP Theorem</h1>
<p>This is not a discussion on what the CAP Theorem is, but on the tradeoffs that GUN decides to default to. Mark gave a great talk on this in Berlin, which <a href="http://gun.js.org/distributed/matters.html" target="_blank">explains everything in easy to understand</a> terms. Kyle Kingsbury (Aphyr) of the Jepsen tests was there, and he <a href="https://twitter.com/aphyr/status/646302398575587332" target="_blank">tweeted</a> about us.</p>
<h3 id="ap">AP</h3>
<p>GUN is an AP system by default, this means GUN can successfully read and write data even if other peers are offline. As a result, GUN is not strongly consistent in linearizable ways. Instead, it is eventually consistent in order to be highly available to users regardless of connectivity. When connectivity is or becomes available again, GUN will synchronize data at low latency using at least once delivery to guarantee that all peers will deterministically converge to the same data within a time frame, without any extra coordination or gossip.</p>
<h3 id="eventual-consistency">Eventual Consistency</h3>
<p>As mentioned, GUN opts for eventual consistency. This means that if two people on opposite sides of the world modified the same piece of data at the &quot;same time&quot;, they would not know about each other&apos;s conflicting updates until the information had propagated to them over the slow network. Meaning their updates will not resolve to a &quot;consistent&quot; view until some amount of time has passed. Why is this the case? Because physics cannot break the speed of light, meaning instantaneous communication is impossible in all known sciences.</p>
<h3 id="strong-consistency">Strong Consistency</h3>
<p>So how is strong consistency possible, then? It is built ontop of a messaging system that is eventually consistent. These messages broadcast a &quot;lock&quot; request to all peers for the data to be modified (this example ignores potential lock request conflicts). The peers &quot;ack&quot; back accepting the data lock, meaning they will not allow local users to read or write on that data, resulting in high latency for the user. Once the original peers has received unanimous approval, it will then write the data and wait till it hears back success from the peers. The following two things can be observed from this:</p>
<ul>
<li>That system is not highly available, if there is a network partition (aka if any one peer cannot be reached) the data cannot be said to be consistent without waiting an indefinite amount time.</li>
<li>Strong consistency is an emergent property of an eventually consistent messaging system. Meaning GUN could evolve into a CP system at the loss of being highly available.</li>
</ul>
<h3 id="linearizability">Linearizability</h3>
<p>While the last point is interesting, it is not recommended that one evolves GUN into a locking system. Instead, new research in Convergent Replicated Data Types (CRDTs), Directed Acyclic Graphs (DAGs), Operational Transformation (OT or WOOTs), and some Block Chain Ledgers provide similar guarantees without simulating any centralized mechanisms. These systems declare the &quot;dependent causality&quot; explicitly in the data, rather than the protocol - and thus should be preferred since they give you some form of linearizability without sacrificing the advantages of a peer-to-peer system. See <a href="https://queue.acm.org/detail.cfm?id=2610533" target="_blank">this article</a> for more details.</p>
<h3 id="summary">Summary</h3>
<p>GUN is AP with eventual consistency by default, but it is possible to upgrade into a CP system but it is not recommended. Instead, one should apply some form of &quot;dependent causality&quot; into the data itself at the application layer manually or as a module that wraps it for you.</p>
<p>Again, we recommend you check out the <a href="http://gun.js.org/distributed/matters.html" target="_blank">tech talk</a>. After you have read it, check out the documentation on how it is implemented, <a href="Conflict-Resolution-with-Guns">here</a>.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="sharding.html" class="navigation navigation-next navigation-unique" aria-label="Next page: Sharding">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Position on the CAP Theorem","level":"1.7.5","depth":2,"next":{"title":"Sharding","level":"1.7.6","depth":2,"path":"more-about-gun/sharding.md","ref":"more-about-gun/sharding.md","articles":[]},"previous":{"title":"How the Algorithm Works","level":"1.7.4","depth":2,"url":"http://gun.js.org/distributed/matters.html","ref":"http://gun.js.org/distributed/matters.html","articles":[]},"dir":"ltr"},"config":{"gitbook":"3.2.2","theme":"default","variables":{},"plugins":["edit-link"],"pluginsConfig":{"edit-link":{"label":"Edit This Page","base":"https://github.com/zwhitchcox/gun/edit/gh-pages"},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"more-about-gun/position-on-the-cap-theorem.md","mtime":"2017-02-28T19:33:30.764Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-02-28T19:40:22.563Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

