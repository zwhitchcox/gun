
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Gun's Data Format Â· GunDb</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="glossary.html" />
    
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../crash-course.html">
            
                <a href="../crash-course.html">
            
                    
                    Crash Course
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../getting-started.html">
            
                <a href="../getting-started.html">
            
                    
                    Getting Started
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    Core API
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../core-api/constructor.html">
            
                <a href="../core-api/constructor.html">
            
                    
                    Gun.constructor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../core-api/put.html">
            
                <a href="../core-api/put.html">
            
                    
                    gun.put
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../core-api/get.html">
            
                <a href="../core-api/get.html">
            
                    
                    gun.get
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../core-api/back.html">
            
                <a href="../core-api/back.html">
            
                    
                    gun.back
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../core-api/opt.html">
            
                <a href="../core-api/opt.html">
            
                    
                    gun.opt
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    API
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../api/path.html">
            
                <a href="../api/path.html">
            
                    
                    gun.path
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../api/on.html">
            
                <a href="../api/on.html">
            
                    
                    gun.on
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../api/val.html">
            
                <a href="../api/val.html">
            
                    
                    gun.val
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../api/set.html">
            
                <a href="../api/set.html">
            
                    
                    gun.set
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../api/map.html">
            
                <a href="../api/map.html">
            
                    
                    gun.map
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../api/not.html">
            
                <a href="../api/not.html">
            
                    
                    gun.not
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="../api/init.html">
            
                <a href="../api/init.html">
            
                    
                    gun.init
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="../api/key.html">
            
                <a href="../api/key.html">
            
                    
                    gun.key
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    Resources
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.6.1" data-path="guns-data-format.html">
            
                <a href="guns-data-format.html">
            
                    
                    Gun's Data Format
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="glossary.html">
            
                <a href="glossary.html">
            
                    
                    Glossary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="using-amazon-s3-for-storage.html">
            
                <a href="using-amazon-s3-for-storage.html">
            
                    
                    Using Amazon S3 for Storage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="security-authentication-authorization.html">
            
                <a href="security-authentication-authorization.html">
            
                    
                    Security, Authentication, and Authorization
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    More About Gun
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../more-about-gun/how-writes-are-handled.html">
            
                <a href="../more-about-gun/how-writes-are-handled.html">
            
                    
                    How Writes Are Handled
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../more-about-gun/the-mesh-network-protocol.html">
            
                <a href="../more-about-gun/the-mesh-network-protocol.html">
            
                    
                    The Mesh Network Protocol
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../more-about-gun/conflict-resolution.html">
            
                <a href="../more-about-gun/conflict-resolution.html">
            
                    
                    Conflict Resolution
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" >
            
                <a target="_blank" href="http://gun.js.org/distributed/matters.html">
            
                    
                    How the Algorithm Works
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../more-about-gun/position-on-the-cap-theorem.html">
            
                <a href="../more-about-gun/position-on-the-cap-theorem.html">
            
                    
                    Position on the CAP Theorem
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="../more-about-gun/sharding.html">
            
                <a href="../more-about-gun/sharding.html">
            
                    
                    Sharding
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.7" data-path="../more-about-gun/porting-gun.html">
            
                <a href="../more-about-gun/porting-gun.html">
            
                    
                    Porting Gun
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../projects.html">
            
                <a href="../projects.html">
            
                    
                    Projects
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" >
            
                <a target="_blank" href="https://github.com/gundb/gun/tree/master/examples">
            
                    
                    Examples
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../modules.html">
            
                <a href="../modules.html">
            
                    
                    Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../snippets-v06x.html">
            
                <a href="../snippets-v06x.html">
            
                    
                    Snippets (v0.6.x)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" >
            
                <span>
            
                    
                    Snippets (v0.3.x)(snippets-v03x.md)
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" >
            
                <a target="_blank" href="https://github.com/amark/gun/wiki/0.2.x-Table-of-Contents">
            
                    
                    v0.2.x
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Gun's Data Format</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="guns-data-format-json">Gun&apos;s Data Format (JSON)</h1>
<h3 id="basic-json-object">Basic JSON object</h3>
<p>The way GUN stores and communicates data is through a specific subset of denormalized JSON. This might sound confusing, but it is actually pretty simple.</p>
<p>For instance, take this object.</p>
<pre><code class="lang-javascript">{
  age: <span class="hljs-number">23</span>,
  hacker: <span class="hljs-literal">true</span>,
  name: <span class="hljs-string">&quot;Mark Nadal&quot;</span>
}
</code></pre>
<h3 id="metadata">Metadata</h3>
<p>This object is composed of <strong>field</strong> and <strong>value</strong> pairs, where a value is always either <code>null</code>, <code>true</code> or <code>false</code>, a <em>number</em> or <em>decimal</em>, a <em>string</em>, or a <em>relation</em>. For clarity, GUN will use a consistent [[vocabulary|Glossary]], where values are primitives that get saved as a whole update on their field.</p>
<p>In order for GUN to deterministically converge on an update across many decentralized peers, it has to hold meta data about the fields and their values. This meta data is included in the GUN object itself, objects in GUN are called a <strong>node</strong>.</p>
<pre><code class="lang-javascript">{
  _: {},
  age: <span class="hljs-number">23</span>,
  hacker: <span class="hljs-literal">true</span>,
  name: <span class="hljs-string">&quot;Mark Nadal&quot;</span>
}
</code></pre>
<p>That meta data is stored on the reserved <code>_</code> field. </p>
<h3 id="soul">Soul</h3>
<p>Every node also must have a universally unique ID, called a <strong>soul</strong>, which is also stored in the meta data under the reserved <code>#</code> field. Like so:</p>
<pre><code class="lang-javascript">{
  _: {<span class="hljs-string">&apos;#&apos;</span>:<span class="hljs-string">&apos;ASDF&apos;</span>},
  age: <span class="hljs-number">23</span>,
  hacker: <span class="hljs-literal">true</span>,
  name: <span class="hljs-string">&quot;Mark Nadal&quot;</span>add another node to the system.
}
</code></pre>
<p>For the sake of comprehension, our example is using a very short soul. Souls should never be this short, and should be generated as a UUID or GUID or as some sufficiently long random alphanumeric string. They also should never conflict with any other node in any other app that uses GUN - more on this later. But first:</p>
<pre><code class="lang-javascript">{
  _: {
    <span class="hljs-string">&apos;#&apos;</span>:<span class="hljs-string">&apos;ASDF&apos;</span>,
    <span class="hljs-string">&apos;&gt;&apos;</span>: {}
  },
  age: <span class="hljs-number">23</span>,
  hacker: <span class="hljs-literal">true</span>,
  name: <span class="hljs-string">&quot;Mark Nadal&quot;</span>
}
</code></pre>
<h4 id="hypothetical-amnesia-machine-ham-state"><a name="HAM"></a>Hypothetical Amnesia Machine (HAM) State</h4>
<p>Next up now is the meta data for the Hypothetical Amnesia Machine, reserved as the <code>&gt;</code> field. This contains a copy of all the fields that have been on the node, with their corresponding convergence states. Such as:</p>
<pre><code class="lang-javascript">{
  _: {
    <span class="hljs-string">&apos;#&apos;</span>:<span class="hljs-string">&apos;ASDF&apos;</span>,
    <span class="hljs-string">&apos;&gt;&apos;</span>: {
      age: <span class="hljs-number">2</span>,
      hacker: <span class="hljs-number">2</span>,
      name: <span class="hljs-number">2</span>
    }
  },
  age: <span class="hljs-number">23</span>,
  hacker: <span class="hljs-literal">true</span>,
  name: <span class="hljs-string">&quot;Mark Nadal&quot;</span>
}
</code></pre>
<p>There you go, that is a complete GUN <strong>node</strong>. Since GUN can sync on partial nodes, you get a very clean and lean way to perform delta updates. You only have to send the diff of a node and not the whole node itself. Now let us look back at the original object and try to do the following:</p>
<pre><code class="lang-javascript">{
  age: <span class="hljs-number">23</span>,
  friend: {
    hacker: <span class="hljs-literal">true</span>,
    name: <span class="hljs-string">&quot;Shreyas Raman&quot;</span>
  },
  hacker: <span class="hljs-literal">true</span>,
  name: <span class="hljs-string">&quot;Mark Nadal&quot;</span>
}
</code></pre>
<h3 id="graph">Graph</h3>
<p>What GUN will do, is it will denormalize it into a subset of JSON which is called a <strong>graph</strong>. We are going to hide the HAM meta data from our view for sake of clarity.</p>
<pre><code class="lang-javascript">{
  <span class="hljs-string">&apos;ASDF&apos;</span>: {
    _: {<span class="hljs-string">&apos;#&apos;</span>:<span class="hljs-string">&apos;ASDF&apos;</span>},
    age: <span class="hljs-number">23</span>,
    friend: {<span class="hljs-string">&apos;#&apos;</span>:<span class="hljs-string">&apos;FDSA&apos;</span>}
    hacker: <span class="hljs-literal">true</span>,
    name: <span class="hljs-string">&quot;Mark Nadal&quot;</span>
  },
  <span class="hljs-string">&apos;FDSA&apos;</span>: {
    _: {<span class="hljs-string">&apos;#&apos;</span>:<span class="hljs-string">&apos;FDSA&apos;</span>},
    hacker: <span class="hljs-literal">true</span>,
    name: <span class="hljs-string">&quot;Shreyas Raman&quot;</span>
  }
}
</code></pre>
<p>You can see that we flatten the object into a graph, which has field and node pairs. The fields on a graph correspond to the soul of the node it has. But how do we maintain who Mark&apos;s friend is? Well, we mentioned that a primitive value can also be a <strong>relation</strong>. A relation has a very simple structure, it is an object with just a soul field on it.</p>
<pre><code class="lang-javascript">{<span class="hljs-string">&apos;#&apos;</span>: <span class="hljs-string">&apos;FDSA&apos;</span>}
</code></pre>
<p>The value of that field is the soul of the node that it points to. Since souls are universally unique, they could point to data within your app or outside of it. This subset of JSON allows us to serialize a web of data, including circular references! Now, finally, there is only one thing beyond a graph:</p>
<pre><code class="lang-javascript">{
  ...
}
</code></pre>
<p>The graph of all graphs over all time, called the <strong>universe</strong>. However, since a single machine cannot process that much data simultaneously, we must distribute the data across many machines, each focusing on some finite graph over a particular interval of time. These graphs contain nodes which hold the actual fields and values we are interested in, as well as the meta data to guarantee convergences.</p>
<h3 id="la-fin">la Fin</h3>
<p>And there you go, ladies and gentleman. From the smallest atom all the way up to a universe of data. Expressed succinctly in simple permutations of <strong>value</strong>, <strong>field</strong>, <strong>node</strong>, <strong>graph</strong>. I hope you enjoyed this discourse in GUN&apos;s formatted subset of JSON. If you have any questions, please ask away at <code>mark@gunDB.io</code>!</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                
                <a href="glossary.html" class="navigation navigation-next navigation-unique" aria-label="Next page: Glossary">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Gun's Data Format","level":"1.6.1","depth":2,"next":{"title":"Glossary","level":"1.6.2","depth":2,"path":"resources/glossary.md","ref":"resources/glossary.md","articles":[]},"previous":{"title":"Resources","level":"1.6","depth":1,"ref":"","articles":[{"title":"Gun's Data Format","level":"1.6.1","depth":2,"path":"resources/guns-data-format.md","ref":"resources/guns-data-format.md","articles":[]},{"title":"Glossary","level":"1.6.2","depth":2,"path":"resources/glossary.md","ref":"resources/glossary.md","articles":[]},{"title":"Using Amazon S3 for Storage","level":"1.6.3","depth":2,"path":"resources/using-amazon-s3-for-storage.md","ref":"resources/using-amazon-s3-for-storage.md","articles":[]},{"title":"Security, Authentication, and Authorization","level":"1.6.4","depth":2,"path":"resources/security-authentication-authorization.md","ref":"resources/security-authentication-authorization.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["edit-link","github","video2"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"github":{"url":"https://github.com/gundb/gun"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"video2":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/zwhitchcox/gun/edit/gh-pages"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"GunDb","gitbook":"3.2.2"},"file":{"path":"resources/guns-data-format.md","mtime":"2017-02-28T20:53:49.340Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-03-02T02:36:28.707Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

